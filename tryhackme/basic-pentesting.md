# Basic Pentesting

![image](https://github.com/dharneegan/ctf/assets/122503989/caf2d85a-a2bb-4f7d-8e95-5a9ae35c5793)

## Rustscan 

We first start by scanning for open ports. Use this command:
```
rustscan -a $IP --ulimint 5000
```
We can see that port 80 is open which means that we can access a web server. Visiting `http://$IP` we are met with a simple page that says that the page is undergoing maintenance. Looking at the source code we see there's a comment saying to check the dev note section. Since we don't know what this is we'll just move on to the next step

## Gobsuter

We can use gobuster to find hidden directories. Use this command:
```
gobuster dir -u $IP -w /usr/share/wordlists/rockyou.txt
```

After running this command we can see that there is a directory named development.

**What is the name of the hidden directory on the web server?**: development

Visiting `http://$IP/development` we can see that there is two text files and reading each one we can see that there are two users nicknamed K and J. Knowing this we can start to enumerate for users

## Enum4linux

Running this command:
```
enum4linux -e $IP
```
It gives us a list of users on one of the sections. 

![image](https://github.com/dharneegan/ctf/assets/122503989/8bd9cb19-f190-4b83-97c5-d18688649fc4)

Now we know that the users nicknamed K and J are actually named kay and jan.

**What is the username?**: jan

**What is the name of the other user you found?**: kay

## Hydra

In one of the notes in the /development directory it says that jan's password is very weak. Knowing this we will bruteforce their password with hydra. Run this command:
```
hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://$IP
```
After running this and waiting patiently we find out that jan's password is armando

**What is the password?**: armando

## SSH

We will now use SSH to login as jan with the credentials.

**What service do you use to access the server?**: SSH
```
ssh jan@$IP
```
Once we're in the machine we can start to look around. Looking around `/home/kay/.ssh` we can see that there are rsa public and private keys. We can read the private key name `id_rsa` and copy and paste it into a file on our host machine. Use `chmod 400 key` to change file permissions. We will now try logging in as kay on this server. Run this command:
```
ssh -i key kay@$IP 
```
Doing this we are met with something unexpected. We need a passphrase. To do this we can use ssh2john to convert the private key into a hash then use john the ripper to crack the hask. 

![image](https://github.com/dharneegan/ctf/assets/122503989/e25b3dfc-cc6d-4a3f-a669-00b26b3e3f9e)

We can see that the passphrase is beeswax. We will try logging in as kay one more time with the passphrase we acquired.

![image](https://github.com/dharneegan/ctf/assets/122503989/c4f49cc3-a4c5-403a-a927-09c93e239f8c)

And we're in. If we run `ls` on this machine we can see that there's a file named `pass.bak`. Reading this file will get us the answer to the last question.

**What is the final password you obtain?**: heresareallystrongpasswordthatfollowsthepasswordpolicy$$


